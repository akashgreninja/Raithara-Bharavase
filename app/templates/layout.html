<!DOCTYPE html>
<html lang="en">
  <head>
    <title>{{ title }}</title>
    <link
      rel="shortcut icon"
      href="{{ url_for('static', filename='images/favicon.ico') }}"
    />

    <!-- for-mobile-apps -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <meta
      name="keywords"
      content="Agro Harvest Responsive web template, Bootstrap Web Templates, Flat Web Templates, Android Compatible web template, 
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyEricsson, Motorola web design"
    />

    <style>
      html {
        font-size: 1rem;
      }
      #closeButton {
        position: absolute;
        top: 10px;
        right: 10px;
        width: 24px;
        height: 24px;
        background-color: #f44336;
        color: #fff;
        border: none;
        border-radius: 50%;
        font-size: 16px;
        cursor: pointer;
      }

      #closeButton:hover {
        background-color: #d32f2f;
      }

      @media (min-width: 576px) {
        html {
          font-size: 1.25rem;
        }
      }

      @media (min-width: 768px) {
        html {
          font-size: 1.5rem;
        }
      }

      @media (min-width: 992px) {
        html {
          font-size: 1.75rem;
        }
      }

      @media (min-width: 1200px) {
        html {
          font-size: 2rem;
        }

        html {
          font-size: 1rem;
        }

        h1 {
          font-size: 1.2rem;
        }

        h2 {
          font-size: 1.1rem;
        }

        @media (min-width: 768px) {
          html {
            font-size: 1.1rem;
          }

          h1 {
            font-size: 1.3rem;
          }

          h2 {
            font-size: 1.2rem;
          }
        }

        @media (min-width: 991px) {
          html {
            font-size: 1.2rem;
          }

          h1 {
            font-size: 1.5rem;
          }

          h2 {
            font-size: 1.4rem;
          }
        }

        @media (min-width: 1200px) {
          html {
            font-size: 1.2rem;
          }

          h1 {
            font-size: 1.7rem;
          }

          h2 {
            font-size: 1.6rem;
          }
        }
      }
    </style>
    <script>
      addEventListener(
        "load",
        function () {
          setTimeout(hideURLbar, 0);
        },
        false
      );

      function hideURLbar() {
        window.scrollTo(0, 1);
      }
    </script>

    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"
    ></script>

    <!-- css files -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <link
      href="{{ url_for('static', filename='css/bootstrap.css') }}"
      rel="stylesheet"
      type="text/css"
    />
    <!-- bootstrap css -->
    <link
      href="{{ url_for('static', filename='css/style.css') }}"
      rel="stylesheet"
      type="text/css"
    />
    <!-- custom css -->
    <link
      href="{{ url_for('static', filename='css/font-awesome.min.css') }}"
      rel="stylesheet"
    />
    <!-- fontawesome css -->
    <!-- //css files -->
    <!-- <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/favicon.png?') }}"> -->

    <script
      type="text/JavaScript"
      src="{{ url_for('static', filename='scripts/cities.js') }}"
    ></script>

    <!-- google fonts -->
    <link
      href="//fonts.googleapis.com/css?family=Thasadith:400,400i,700,700i&amp;subset=latin-ext,thai,vietnamese"
      rel="stylesheet"
    />
    <!-- //google fonts -->

    <style>
      header {
        background-color: rgba(30, 30, 30, 1);
        margin-top: 0rem;
        display: block;
      }
    </style>
  </head>

  <body>
    <!-- Navigation -->
    <nav
      class="navbar navbar-expand-lg navbar-dark bg-dark static-top"
      style="background-color: #e27cfe"
    >
      <div class="container">
        <a class="navbar-brand" href="{{ url_for('home') }}">
          <img
            src="{{ url_for('static', filename='../static/images/Raithara Bahravase.png') }}"
            style="width: 90px; height: 55px"
            alt=""
          />
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbarResponsive"
          aria-controls="navbarResponsive"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item active">
              <a class="nav-link" href="{{ url_for('home') }}"
                >Home
                <span class="sr-only">(current)</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('crop_recommend') }}"
                >Crop Recommendation</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                href="{{ url_for('fertilizer_recommendation') }}"
                >Fertilizer Recommmendation</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('disease_prediction') }}"
                >Disease Detection</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="http://localhost:3000/"
                >Blockchain verification</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="http://127.0.0.1:5500/Map/index.html"
                >Famer utilities
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    {% block body %} {% endblock %}

    <!-- footer -->
    <footer class="text-center py-5">
      <div class="container py-md-3">
        <!-- logo -->
        <h2 class="logo2 text-center">
          <a href="{{ url_for('home') }}"> Raithara Bharavase </a>
        </h2>
        <!-- //logo -->
        <!-- address -->

        <div class="w3l-copy text-center">
          <p class="text-da">An Environmental Intelligence Startup<br /></p>
        </div>
        <p class="homelogo"></p>
        <p>Made By the Students of Bit</p>
        <p>&copy; No Copyright feel free to copy and paste</p>
      </div>
    </footer>
    <!-- //footer -->

    <!-- move top icon -->
    <button id="chatButton" onclick="toggleChat()">Open Chat</button>

    <div id="chatContainer">
      <h2>Chatbot</h2>
      <button id="closeButton" onclick="closeChat()">X</button>
      <div id="chatMessages"></div>
      <div class="user-input">
        <input type="text" id="userInput" placeholder="Type your message" />
        <button onclick="sendMessage()">Send</button>
      </div>
    </div>

    <!-- //move top icon -->
  </body>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      var chatContainer = document.getElementById("chatContainer");
      var closeButton = document.getElementById("closeButton");

      closeButton.addEventListener("click", function () {
        chatContainer.style.display = "none";
      });

      // Rest of your code
    });
    // Global variable to store chatbot responses
    var chatbotResponses = {};

    // Function to load the JSON file
    function loadJSONFile(callback) {
      var xobj = new XMLHttpRequest();
      xobj.overrideMimeType("application/json");
      xobj.open("GET", '{{ url_for("static", filename="data.json") }}', true);
      xobj.onreadystatechange = function () {
        if (xobj.readyState === 4 && xobj.status === 200) {
          chatbotResponses = JSON.parse(xobj.responseText);
          callback();
        }
      };
      xobj.send(null);
    }

    // Function to toggle the chat container visibility
    function toggleChat() {
      var chatContainer = document.getElementById("chatContainer");
      if (chatContainer.style.display === "none") {
        chatContainer.style.display = "block";
      } else {
        chatContainer.style.display = "none";
      }
    }
    document.addEventListener("DOMContentLoaded", function () {
      var chatButton = document.getElementById("chatButton");
      var chatContainer = document.getElementById("chatContainer");

      chatButton.addEventListener("click", function () {
        chatContainer.classList.toggle("show");
      });

      document.addEventListener("click", function (event) {
        var target = event.target;
        if (!chatContainer.contains(target) && target !== chatButton) {
          chatContainer.classList.remove("show");
        }
      });
    });

    // Function to send a message and receive a response
    function sendMessage() {
      var userInput = document.getElementById("userInput").value;
      var chatMessages = document.getElementById("chatMessages");

      // Process user input and get the response from the loaded JSON data
      var response =
        chatbotResponses[userInput.toLowerCase()] ||
        "Sorry, I don't understand.";

      // Display the response in the chat window
      var botMessage = document.createElement("p");
      botMessage.innerText = "Bot: " + response;
      chatMessages.appendChild(botMessage);

      // Clear the user input field
      document.getElementById("userInput").value = "";
    }

    // Function to initialize the chatbot after loading the JSON file
    function initializeChatbot() {
      // Add event listener to the chat button
      document
        .getElementById("chatButton")
        .addEventListener("click", toggleChat);

      // Add event listener to the send button
      document
        .getElementById("sendButton")
        .addEventListener("click", sendMessage);
    }

    // Load the JSON file and initialize the chatbot
    loadJSONFile(initializeChatbot);
  </script>
</html>
